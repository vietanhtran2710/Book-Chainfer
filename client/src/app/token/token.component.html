<app-navbar></app-navbar>
<div class="container">
    <div class="row">
      <nav>
        <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active" id="nav-home-tab" data-bs-toggle="tab" href="#nav-home" 
            role="tab" aria-controls="nav-home" aria-selected="true">Owned tokens</a>
            <a class="nav-item nav-link" id="nav-profile-tab" data-bs-toggle="tab" href="#nav-profile" 
            role="tab" aria-controls="nav-profile" aria-selected="false">Publish tokens</a>
            <a class="nav-item nav-link" id="nav-contact-tab" data-bs-toggle="tab" href="#nav-contact" 
            role="tab" aria-controls="nav-contact" aria-selected="false">Read tokens</a>
        </div>
      </nav>
      <div class="tab-content" id="nav-tabContent">
          <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <div class="main-box clearfix">
              <div class="table-responsive">
                <table class="table user-list">
                  <thead>
                    <tr>
                      <th class="text-center"><span>Token ID</span></th>
                      <th class="text-center"><span>Book ID</span></th>
                      <th class="text-center"><span>Title</span></th>
                      <th *ngIf="userAddress == pageAddress" class="text-center"><span>Publishing right</span></th>
                      <th *ngIf="userAddress == pageAddress" class="text-center"><span>Reading right</span></th>
                      <th *ngIf="userAddress == pageAddress" class="text-center"><span>Action</span></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let info of ownedTokens">
                      <td style="width: 10%;">
                        <span class="user-link">{{info.tokenId}}</span>
                      </td>
                      <td style="width: 10%;">
                        <span class="user-link">{{info.bookId}}</span>
                      </td>
                      <td>
                          <span class="user-link">{{info.bookTitle}}</span>
                      </td>
                      <td *ngIf="userAddress == pageAddress" class="text-center" style="width: 11%;">
                        <span class="label label-default">
                          <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#authorizeModal" 
                          (click)="updateModalInfo(1, info)">Authorize</button>
                        </span>
                      </td>
                      <td *ngIf="userAddress == pageAddress" class="text-center" style="width: 11%;">
                        <span class="label label-default">
                          <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#authorizeModal" 
                          (click)="updateModalInfo(2, info)">Authorize</button>
                        </span>
                      </td>
                      <td *ngIf="userAddress == pageAddress" class="text-center" style="width: 11%;">
                        <span class="label label-default">
                          <button class="btn btn-primary">Read</button>
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <ul class="pagination pull-right">
                <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>
              </ul>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
            <div class="main-box clearfix">
              <div class="table-responsive">
                <table class="table user-list">
                  <thead>
                    <tr>
                      <th class="text-center"><span>Token ID</span></th>
                      <th class="text-center"><span>Book ID</span></th>
                      <th class="text-center"><span>Title</span></th>
                      <th *ngIf="userAddress == pageAddress" class="text-center"><span>Reading right</span></th>
                      <th *ngIf="userAddress == pageAddress" class="text-center"><span>Action</span></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let info of publishTokens">
                      <td style="width: 10%;">
                        <span class="user-link">{{info.tokenId}}</span>
                      </td>
                      <td style="width: 10%;">
                        <span class="user-link">{{info.bookId}}</span>
                      </td>
                      <td>
                          <span class="user-link">{{info.bookTitle}}</span>
                      </td>
                      <td *ngIf="userAddress == pageAddress" class="text-center" style="width: 11%;">
                        <span class="label label-default">
                          <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#authorizeModal" 
                          (click)="updateModalInfo(2, info)">Authorize</button>
                        </span>
                      </td>
                      <td *ngIf="userAddress == pageAddress" class="text-center" style="width: 11%;">
                        <span class="label label-default"><button class="btn btn-primary">Read</button></span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <ul class="pagination pull-right">
                <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>
              </ul>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
            <div class="main-box clearfix">
              <div class="table-responsive">
                <table class="table user-list">
                  <thead>
                    <tr>
                      <th class="text-center"><span>Token ID</span></th>
                      <th class="text-center"><span>Book ID</span></th>
                      <th class="text-center"><span>Title</span></th>
                      <th *ngIf="userAddress == pageAddress" class="text-center"><span>Action</span></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let info of readTokens">
                      <td style="width: 10%;">
                        <span class="user-link">{{info.tokenId}}</span>
                      </td>
                      <td style="width: 10%;">
                        <span class="user-link">{{info.bookId}}</span>
                      </td>
                      <td>
                          <span class="user-link">{{info.bookTitle}}</span>
                      </td>
                      <td *ngIf="userAddress == pageAddress" class="text-center" style="width: 11%;">
                        <a [routerLink]=" ['/view/', info.bookId]">
                          <span class="label label-default"><button class="btn btn-primary">Read</button></span>
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <ul class="pagination pull-right">
                <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>
              </ul>
            </div>
          </div>
      </div>
    </div>
</div>

<div class="modal fade" id="authorizeModal" tabindex="-1" role="dialog" 
    aria-labelledby="authorizeModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title" id="extendModalLabel">
					Authorize token
				</h1>
			</div>
			<div class="modal-body">
				<form [formGroup]="authorizeModel" (ngSubmit)="authorizeToken()" id="authorize">
					<div class="form-group">
						<label for="deletePassword">Recipient Address</label>
						<input type="text" class="form-control" name="walletAddress" id="walletAddress" formControlName="toAddress">
            <label for="deletePassword">Token Type</label>
						<input type="text" class="form-control" name="tokenType" id="tokenType" formControlName="tokenType" readonly>
            <label for="deletePassword">Book Title</label>
						<input type="text" class="form-control" name="bookTitle" id="bookTitle" formControlName="bookTitle" readonly>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" form="authorize" data-dismiss="modal">
          Confirm
        </button>
			</div>
		</div>
	</div>
</div>